{"version":3,"file":"UAParser.js","names":["PROMISE_PROXY_HANDLING","ECustomError","createInjectionInstance","createAPIInstance","UAParser","key","headers","Error","REQUIRED_RESOURCE_KEY","length","EMPTY_RESOURCE_KEY","test","ATTEMPT_TO_USE_USER_AGENT","INVALID_RESOURCE_KEY","window","Proxy","DOM_NOT_FOUND","Object","keys","INCOMPLETE_HEADER_MAP","HEADERS_NOT_HASHMAP","some","k","INVALID_HEADERS_VALUE","toLowerCase","includes"],"sources":["../../src/UAParser.ts"],"sourcesContent":["import PROMISE_PROXY_HANDLING from \"./proxies/promiseProxy\";\r\nimport { ECustomError, ECustomWarnings } from \"./utils/errors\";\r\nimport { USER_KEY_VALID } from \"./config\";\r\nimport createInjectionInstance from \"./instance/createInjectionInstance\";\r\nimport createAPIInstance from \"./instance/createAPIInstance\";\r\n\r\ntype TResourceKey = string;\r\ntype THeaders = {\r\n  [key: string]: string;\r\n};\r\n\r\nconst UAParser = (key: TResourceKey, headers?: THeaders) => {\r\n  if (!key) throw Error(ECustomError.REQUIRED_RESOURCE_KEY);\r\n  if (key.length <= 0) throw Error(ECustomError.EMPTY_RESOURCE_KEY);\r\n  if (/\\s/g.test(key)) throw Error(ECustomError.ATTEMPT_TO_USE_USER_AGENT);\r\n  if (key.length < 4) throw Error(ECustomError.INVALID_RESOURCE_KEY);\r\n\r\n  if (typeof window !== \"undefined\") {\r\n    if (!headers) {\r\n      return new Proxy(createInjectionInstance(key), PROMISE_PROXY_HANDLING);\r\n    }\r\n  } else {\r\n    if (!headers) throw new Error(ECustomError.DOM_NOT_FOUND);\r\n  }\r\n\r\n  if (Object.keys(headers).length <= 0)\r\n    throw Error(ECustomError.INCOMPLETE_HEADER_MAP);\r\n  if (Object.keys(headers).length <= 0)\r\n    throw Error(ECustomError.HEADERS_NOT_HASHMAP);\r\n  if (Object.keys(headers).some((k) => typeof headers[k] !== \"string\"))\r\n    throw Error(ECustomError.INVALID_HEADERS_VALUE);\r\n  if (\r\n    !Object.keys(headers).some(\r\n      (k) =>\r\n        k.toLowerCase() === \"user-agent\" || k.toLowerCase().includes(\"sec-ch\"),\r\n    )\r\n  )\r\n    throw Error(ECustomError.INCOMPLETE_HEADER_MAP);\r\n\r\n  return new Proxy(createAPIInstance(key, headers), PROMISE_PROXY_HANDLING);\r\n};\r\n\r\nexport default UAParser;\r\n"],"mappings":"AAAA,OAAOA,sBAAsB,MAAM,wBAAwB;AAC3D,SAASC,YAAY,QAAyB,gBAAgB;AAE9D,OAAOC,uBAAuB,MAAM,oCAAoC;AACxE,OAAOC,iBAAiB,MAAM,8BAA8B;AAO5D,MAAMC,QAAQ,GAAG,CAACC,GAAiB,EAAEC,OAAkB,KAAK;EAC1D,IAAI,CAACD,GAAG,EAAE,MAAME,KAAK,CAACN,YAAY,CAACO,qBAAqB,CAAC;EACzD,IAAIH,GAAG,CAACI,MAAM,IAAI,CAAC,EAAE,MAAMF,KAAK,CAACN,YAAY,CAACS,kBAAkB,CAAC;EACjE,IAAI,KAAK,CAACC,IAAI,CAACN,GAAG,CAAC,EAAE,MAAME,KAAK,CAACN,YAAY,CAACW,yBAAyB,CAAC;EACxE,IAAIP,GAAG,CAACI,MAAM,GAAG,CAAC,EAAE,MAAMF,KAAK,CAACN,YAAY,CAACY,oBAAoB,CAAC;EAElE,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;IACjC,IAAI,CAACR,OAAO,EAAE;MACZ,OAAO,IAAIS,KAAK,CAACb,uBAAuB,CAACG,GAAG,CAAC,EAAEL,sBAAsB,CAAC;IACxE;EACF,CAAC,MAAM;IACL,IAAI,CAACM,OAAO,EAAE,MAAM,IAAIC,KAAK,CAACN,YAAY,CAACe,aAAa,CAAC;EAC3D;EAEA,IAAIC,MAAM,CAACC,IAAI,CAACZ,OAAO,CAAC,CAACG,MAAM,IAAI,CAAC,EAClC,MAAMF,KAAK,CAACN,YAAY,CAACkB,qBAAqB,CAAC;EACjD,IAAIF,MAAM,CAACC,IAAI,CAACZ,OAAO,CAAC,CAACG,MAAM,IAAI,CAAC,EAClC,MAAMF,KAAK,CAACN,YAAY,CAACmB,mBAAmB,CAAC;EAC/C,IAAIH,MAAM,CAACC,IAAI,CAACZ,OAAO,CAAC,CAACe,IAAI,CAAEC,CAAC,IAAK,OAAOhB,OAAO,CAACgB,CAAC,CAAC,KAAK,QAAQ,CAAC,EAClE,MAAMf,KAAK,CAACN,YAAY,CAACsB,qBAAqB,CAAC;EACjD,IACE,CAACN,MAAM,CAACC,IAAI,CAACZ,OAAO,CAAC,CAACe,IAAI,CACvBC,CAAC,IACAA,CAAC,CAACE,WAAW,EAAE,KAAK,YAAY,IAAIF,CAAC,CAACE,WAAW,EAAE,CAACC,QAAQ,CAAC,QAAQ,CAAC,CACzE,EAED,MAAMlB,KAAK,CAACN,YAAY,CAACkB,qBAAqB,CAAC;EAEjD,OAAO,IAAIJ,KAAK,CAACZ,iBAAiB,CAACE,GAAG,EAAEC,OAAO,CAAC,EAAEN,sBAAsB,CAAC;AAC3E,CAAC;AAED,eAAeI,QAAQ"}