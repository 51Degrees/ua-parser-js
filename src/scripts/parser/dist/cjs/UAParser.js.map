{"version":3,"file":"UAParser.js","names":["UAParser","key","headers","Error","ECustomError","REQUIRED_RESOURCE_KEY","length","EMPTY_RESOURCE_KEY","test","ATTEMPT_TO_USE_USER_AGENT","INVALID_RESOURCE_KEY","window","Proxy","createInjectionInstance","PROMISE_PROXY_HANDLING","DOM_NOT_FOUND","Object","keys","INCOMPLETE_HEADER_MAP","HEADERS_NOT_HASHMAP","some","k","INVALID_HEADERS_VALUE","toLowerCase","includes","createAPIInstance"],"sources":["../../src/UAParser.ts"],"sourcesContent":["import PROMISE_PROXY_HANDLING from \"./proxies/promiseProxy\";\nimport { ECustomError } from \"./utils/errors\";\nimport createInjectionInstance from \"./instance/createInjectionInstance\";\nimport createAPIInstance from \"./instance/createAPIInstance\";\n\ntype TResourceKey = string;\ntype THeaders = {\n  [key: string]: string;\n};\n\nconst UAParser = (key: TResourceKey, headers?: THeaders) => {\n  if (!key) throw Error(ECustomError.REQUIRED_RESOURCE_KEY);\n  if (key.length <= 0) throw Error(ECustomError.EMPTY_RESOURCE_KEY);\n  if (/\\s/g.test(key)) throw Error(ECustomError.ATTEMPT_TO_USE_USER_AGENT);\n  if (key.length < 4) throw Error(ECustomError.INVALID_RESOURCE_KEY);\n\n  if (typeof window !== \"undefined\") {\n    if (!headers) {\n      return new Proxy(createInjectionInstance(key), PROMISE_PROXY_HANDLING);\n    }\n  } else {\n    if (!headers) throw new Error(ECustomError.DOM_NOT_FOUND);\n  }\n\n  if (Object.keys(headers).length <= 0)\n    throw Error(ECustomError.INCOMPLETE_HEADER_MAP);\n  if (Object.keys(headers).length <= 0)\n    throw Error(ECustomError.HEADERS_NOT_HASHMAP);\n  if (Object.keys(headers).some((k) => typeof headers[k] !== \"string\"))\n    throw Error(ECustomError.INVALID_HEADERS_VALUE);\n  if (\n    !Object.keys(headers).some(\n      (k) =>\n        k.toLowerCase() === \"user-agent\" || k.toLowerCase().includes(\"sec-ch\"),\n    )\n  )\n    throw Error(ECustomError.INCOMPLETE_HEADER_MAP);\n\n  return new Proxy(createAPIInstance(key, headers), PROMISE_PROXY_HANDLING);\n};\n\nexport default UAParser;\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAA6D;AAO7D,IAAMA,QAAQ,GAAG,SAAXA,QAAQ,CAAIC,GAAiB,EAAEC,OAAkB,EAAK;EAC1D,IAAI,CAACD,GAAG,EAAE,MAAME,KAAK,CAACC,oBAAY,CAACC,qBAAqB,CAAC;EACzD,IAAIJ,GAAG,CAACK,MAAM,IAAI,CAAC,EAAE,MAAMH,KAAK,CAACC,oBAAY,CAACG,kBAAkB,CAAC;EACjE,IAAI,KAAK,CAACC,IAAI,CAACP,GAAG,CAAC,EAAE,MAAME,KAAK,CAACC,oBAAY,CAACK,yBAAyB,CAAC;EACxE,IAAIR,GAAG,CAACK,MAAM,GAAG,CAAC,EAAE,MAAMH,KAAK,CAACC,oBAAY,CAACM,oBAAoB,CAAC;EAElE,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;IACjC,IAAI,CAACT,OAAO,EAAE;MACZ,OAAO,IAAIU,KAAK,CAAC,IAAAC,mCAAuB,EAACZ,GAAG,CAAC,EAAEa,wBAAsB,CAAC;IACxE;EACF,CAAC,MAAM;IACL,IAAI,CAACZ,OAAO,EAAE,MAAM,IAAIC,KAAK,CAACC,oBAAY,CAACW,aAAa,CAAC;EAC3D;EAEA,IAAIC,MAAM,CAACC,IAAI,CAACf,OAAO,CAAC,CAACI,MAAM,IAAI,CAAC,EAClC,MAAMH,KAAK,CAACC,oBAAY,CAACc,qBAAqB,CAAC;EACjD,IAAIF,MAAM,CAACC,IAAI,CAACf,OAAO,CAAC,CAACI,MAAM,IAAI,CAAC,EAClC,MAAMH,KAAK,CAACC,oBAAY,CAACe,mBAAmB,CAAC;EAC/C,IAAIH,MAAM,CAACC,IAAI,CAACf,OAAO,CAAC,CAACkB,IAAI,CAAC,UAACC,CAAC;IAAA,OAAK,OAAOnB,OAAO,CAACmB,CAAC,CAAC,KAAK,QAAQ;EAAA,EAAC,EAClE,MAAMlB,KAAK,CAACC,oBAAY,CAACkB,qBAAqB,CAAC;EACjD,IACE,CAACN,MAAM,CAACC,IAAI,CAACf,OAAO,CAAC,CAACkB,IAAI,CACxB,UAACC,CAAC;IAAA,OACAA,CAAC,CAACE,WAAW,EAAE,KAAK,YAAY,IAAIF,CAAC,CAACE,WAAW,EAAE,CAACC,QAAQ,CAAC,QAAQ,CAAC;EAAA,EACzE,EAED,MAAMrB,KAAK,CAACC,oBAAY,CAACc,qBAAqB,CAAC;EAEjD,OAAO,IAAIN,KAAK,CAAC,IAAAa,6BAAiB,EAACxB,GAAG,EAAEC,OAAO,CAAC,EAAEY,wBAAsB,CAAC;AAC3E,CAAC;AAAC,eAEad,QAAQ;AAAA"}