{"version":3,"file":"bundle.esm.js","sources":["../../src/utils/errors/index.ts","../../src/proxies/promiseProxy.ts","../../src/proxies/resultProxy.ts","../../src/utils/extendWithLegacyProps.ts","../../src/instance/createInjectionInstance.ts","../../src/api/api.ts","../../src/instance/createAPIInstance.ts","../../src/UAParser.ts"],"sourcesContent":["enum ECustomError {\r\n  DOM_NOT_FOUND = `UAParser is not running in the browser context (no DOM available), you must pass header map as a parameter to do the explicit device detection.`,\r\n  REQUIRED_RESOURCE_KEY = `Resource key required. Configure one at https://configure.51degrees.com/S6fGMDKw`,\r\n  EMPTY_RESOURCE_KEY = `Empty resource key provided. Configure one at https://configure.51degrees.com/S6fGMDKw`,\r\n  INCOMPLETE_HEADER_MAP = `Incomplete header map. Must include either User-Agent or Sec-CH-UA header.`,\r\n  ATTEMPT_TO_USE_USER_AGENT = `You are trying to use the legacy UAParser and pass User-Agent string as a parameter, please refer to the new API: await UAParser([resource-key][, header-map]).  Configure a resource key at https://configure.51degrees.com`,\r\n  INVALID_RESOURCE_KEY = `Invalid resource key. Configure one at https://configure.51degrees.com/S6fGMDKw`,\r\n  HEADERS_NOT_HASHMAP = \"Invalid header map. Header map object must be a valid hash map.\",\r\n  INVALID_HEADERS_VALUE = \"Invalid header map. Header values must be of type string.\",\r\n  PROMISE_MISUSE = \"You are likely using a legacy API. The new UAParser call returns a promise that must be awaited.\",\r\n}\r\n\r\nenum ECustomWarnings {\r\n  USING_DEFAULT_KEY = \"Resource key not provided. Using default resource key\",\r\n}\r\n\r\nexport { ECustomError, ECustomWarnings };\r\n","import { ECustomError } from \"../utils/errors\";\r\nimport { TApiResponseData } from \"../api/api\";\r\n\r\nconst PROMISE_PROXY_HANDLING = {\r\n  get: (\r\n    target: Promise<TApiResponseData>,\r\n    prop: string,\r\n  ) => {\r\n    if (prop === \"then\" || prop === \"catch\")\r\n      return target[prop].bind(target);\r\n    if (target instanceof Promise)\r\n      throw new Error(ECustomError.PROMISE_MISUSE);\r\n    return Reflect.get(target, prop);\r\n  },\r\n};\r\n\r\nexport default PROMISE_PROXY_HANDLING;\r\n","import { TApiResponseData } from \"../api/api\";\r\n\r\nexport const DEPRECATED_METHODS = [\r\n  \"getCPU\",\r\n  \"getResult\",\r\n  \"getBrowser\",\r\n  \"getDevice\",\r\n  \"getEngine\",\r\n  \"getOS\",\r\n  \"getUA\",\r\n  \"setUA\",\r\n];\r\n\r\nconst RESULT_PROXY_HANDLING = {\r\n  get: (target: TApiResponseData, prop: string) => {\r\n    // TODO: move this error message to the ECustomError, and replace $prop dynamically\r\n    if (DEPRECATED_METHODS.includes(prop))\r\n      throw new Error(\r\n        `Method ${prop} deprecated. Use result object properties directly. result.device contains new 51Degrees data points.`,\r\n      );\r\n    return Reflect.get(target, prop);\r\n  },\r\n};\r\n\r\n// Refactor\r\n// export const DEPRECATED_METHODS = new Set([\r\n//   \"getCPU\",\r\n//   \"getResult\",\r\n//   \"getBrowser\",\r\n//   \"getDevice\",\r\n//   \"getEngine\",\r\n//   \"getOS\",\r\n//   \"getUA\",\r\n//   \"setUA\",\r\n// ]);\r\n//\r\n// const RESULT_PROXY_HANDLING = {\r\n//   get: (target: TApiResponseData, prop: string) => {\r\n//     if (DEPRECATED_METHODS.has(prop))\r\n//       throw new Error(\r\n//           ECustomError.METHOD_DEPRECATED.replace('$prop', prop),\r\n//       );\r\n//     return Reflect.get(target, prop);\r\n//   },\r\n// };\r\n\r\nexport default RESULT_PROXY_HANDLING;\r\n","import { mapDeviceTypeToLegacy } from \"./mapDeviceTypeToLegacy\";\r\n\r\nexport const LEGACY_PROPERTIES_MAPPING = {\r\n  browser: {\r\n    name: \"BrowserName\",\r\n    version: \"BrowserVersion\",\r\n  },\r\n  cpu: {\r\n    architecture: \"Unknown\",\r\n  },\r\n  device: {\r\n    model: \"HardwareModel\",\r\n    type: \"DeviceType\",\r\n    vendor: \"HardwareVendor\",\r\n  },\r\n  engine: {\r\n    name: \"LayoutEngine\",\r\n    version: \"Unknown\",\r\n  },\r\n  os: {\r\n    name: \"PlatformName\",\r\n    version: \"PlatformVersion\",\r\n  },\r\n};\r\n\r\nconst extendWithLegacyProps = (target) => {\r\n  const temp = { ...target };\r\n  Object.keys(LEGACY_PROPERTIES_MAPPING).forEach((cKey) => {\r\n    if (!temp[cKey]) temp[cKey] = {};\r\n    Object.keys(LEGACY_PROPERTIES_MAPPING[cKey]).forEach(\r\n      (eKey) => {\r\n        const mappedPropName =\r\n          LEGACY_PROPERTIES_MAPPING[cKey][\r\n            eKey\r\n          ].toLowerCase();\r\n        temp[cKey][eKey] =\r\n          temp.device[mappedPropName] || undefined;\r\n      },\r\n    );\r\n  });\r\n  return temp;\r\n};\r\n\r\nexport default extendWithLegacyProps;\r\n","import RESULT_PROXY_HANDLING from \"../proxies/resultProxy\";\nimport { TApiResponseData } from \"../api/api\";\nimport extendWithLegacyProps from \"../utils/extendWithLegacyProps\";\nimport { USER_KEY_NOT_VALID } from \"../config\";\n\nconst createInjectionInstance = async (\n  key: string\n): Promise<TApiResponseData> => {\n  try {\n    const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.async = true;\n    script.src = `https://cloud.51degrees.com/api/v4/${key}.js?cloud.client.product=ua-parser`;\n    document.head.appendChild(script);\n    return new Promise<TApiResponseData>((resolve, reject) => {\n      script.onload = () => {\n        // @ts-ignore\n        fod.complete((data) => {\n          const mappedToLegacy = extendWithLegacyProps(data);\n          const proxy = new Proxy(mappedToLegacy, RESULT_PROXY_HANDLING);\n          resolve(proxy);\n        });\n      };\n      script.onerror = () => {\n        reject(\n          \"UAParser-51D device detection failed to load javascript resource\"\n        );\n      };\n    });\n  } catch (error) {\n    throw new Error(`Injection request failed: ${error}`);\n  }\n};\n\nexport default createInjectionInstance;\n","const api = {\n  getJSONRequest: (resourceKey: string, headers?: {}): Promise<IAPIResponse> =>\n    request(\n      new URL(\n        `https://cloud.51degrees.com/api/v4/${resourceKey}.json?cloud.client.product=ua-parser`,\n      ),\n      headers,\n    ),\n};\n\nconst request = async (url: URL, headers?: {}): Promise<IAPIResponse> => {\n  const getParams = \"&\" + new URLSearchParams(headers).toString();\n  if (typeof window !== \"undefined\") {\n    try {\n      const response = await fetch(url + getParams);\n      const data = await response.json();\n      return {\n        status: response.status,\n        response: data,\n      };\n    } catch (error) {\n      throw new Error(`Request failed: ${error}`);\n    }\n  } else {\n    const http = require(\"http\");\n    const https = require(\"https\");\n    const agent = url.protocol === \"http:\" ? http : https;\n    const config = {\n      hostname: url.hostname,\n      port: url.port,\n      path: url.pathname + getParams,\n      method: \"GET\",\n    };\n    return new Promise<IAPIResponse>((resolve, reject) => {\n      agent\n        .get(config, (res) => {\n          let chunks = \"\";\n          res.on(\"data\", (chunk) => {\n            chunks += chunk;\n          });\n          res.on(\"end\", () => {\n            resolve({\n              status: res.statusCode,\n              response: JSON.parse(chunks),\n            });\n          });\n        })\n        .on(\"error\", (error) => {\n          reject(new Error(`Request failed: ${error}`));\n        });\n    });\n  }\n};\n\nexport interface IAPIResponse {\n  status: number;\n  response: TApiResponseData;\n}\n\nexport type TApiResponseData = {\n  [key: string]: any;\n};\n\nexport default api;\n","import api from \"../api\";\r\nimport RESULT_PROXY_HANDLING from \"../proxies/resultProxy\";\r\nimport { TApiResponseData } from \"../api/api\";\r\nimport extendWithLegacyProps from \"../utils/extendWithLegacyProps\";\r\n\r\nconst createAPIInstance = async (\r\n  key: string,\r\n  headers?: {},\r\n): Promise<TApiResponseData> => {\r\n  try {\r\n    const { status, response } = await api.getJSONRequest(\r\n      key,\r\n      headers,\r\n    );\r\n    if (status === 200) {\r\n      const mappedToLegacy =\r\n        extendWithLegacyProps(response);\r\n      return new Proxy(\r\n        mappedToLegacy,\r\n        RESULT_PROXY_HANDLING,\r\n      );\r\n    } else {\r\n      throw new Error(response.errors.at(0));\r\n    }\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\nexport default createAPIInstance;\r\n","import PROMISE_PROXY_HANDLING from \"./proxies/promiseProxy\";\r\nimport { ECustomError, ECustomWarnings } from \"./utils/errors\";\r\nimport { USER_KEY_VALID } from \"./config\";\r\nimport createInjectionInstance from \"./instance/createInjectionInstance\";\r\nimport createAPIInstance from \"./instance/createAPIInstance\";\r\n\r\ntype TResourceKey = string;\r\ntype THeaders = {\r\n  [key: string]: string;\r\n};\r\n\r\nconst UAParser = (key: TResourceKey, headers?: THeaders) => {\r\n  if (!key) throw Error(ECustomError.REQUIRED_RESOURCE_KEY);\r\n  if (key.length <= 0) throw Error(ECustomError.EMPTY_RESOURCE_KEY);\r\n  if (/\\s/g.test(key)) throw Error(ECustomError.ATTEMPT_TO_USE_USER_AGENT);\r\n  if (key.length < 4) throw Error(ECustomError.INVALID_RESOURCE_KEY);\r\n\r\n  if (typeof window !== \"undefined\") {\r\n    if (!headers) {\r\n      return new Proxy(createInjectionInstance(key), PROMISE_PROXY_HANDLING);\r\n    }\r\n  } else {\r\n    if (!headers) throw new Error(ECustomError.DOM_NOT_FOUND);\r\n  }\r\n\r\n  if (Object.keys(headers).length <= 0)\r\n    throw Error(ECustomError.INCOMPLETE_HEADER_MAP);\r\n  if (Object.keys(headers).length <= 0)\r\n    throw Error(ECustomError.HEADERS_NOT_HASHMAP);\r\n  if (Object.keys(headers).some((k) => typeof headers[k] !== \"string\"))\r\n    throw Error(ECustomError.INVALID_HEADERS_VALUE);\r\n  if (\r\n    !Object.keys(headers).some(\r\n      (k) =>\r\n        k.toLowerCase() === \"user-agent\" || k.toLowerCase().includes(\"sec-ch\"),\r\n    )\r\n  )\r\n    throw Error(ECustomError.INCOMPLETE_HEADER_MAP);\r\n\r\n  return new Proxy(createAPIInstance(key, headers), PROMISE_PROXY_HANDLING);\r\n};\r\n\r\nexport default UAParser;\r\n"],"names":["ECustomError","ECustomWarnings","PROMISE_PROXY_HANDLING","get","target","prop","bind","Promise","Error","PROMISE_MISUSE","Reflect","DEPRECATED_METHODS","RESULT_PROXY_HANDLING","includes","LEGACY_PROPERTIES_MAPPING","browser","name","version","cpu","architecture","device","model","type","vendor","engine","os","extendWithLegacyProps","temp","Object","keys","forEach","cKey","eKey","mappedPropName","toLowerCase","undefined","createInjectionInstance","key","script","document","createElement","async","src","head","appendChild","resolve","reject","onload","fod","complete","data","mappedToLegacy","proxy","Proxy","onerror","api","getJSONRequest","resourceKey","headers","request","URL","url","getParams","URLSearchParams","toString","window","fetch","response","json","status","http","require","https","agent","protocol","config","hostname","port","path","pathname","method","res","chunks","on","chunk","statusCode","JSON","parse","error","createAPIInstance","errors","at","UAParser","REQUIRED_RESOURCE_KEY","length","EMPTY_RESOURCE_KEY","test","ATTEMPT_TO_USE_USER_AGENT","INVALID_RESOURCE_KEY","DOM_NOT_FOUND","INCOMPLETE_HEADER_MAP","HEADERS_NOT_HASHMAP","some","k","INVALID_HEADERS_VALUE"],"mappings":"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"}